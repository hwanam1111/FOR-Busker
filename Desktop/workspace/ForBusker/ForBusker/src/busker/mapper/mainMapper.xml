<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="main">

<select id="idCheck" parameterType="busker.scan.vo.MemberVO" resultType="busker.scan.vo.MemberVO"> 
	select * from member where memEmail=#{memEmail} AND memPw= #{memPw} AND memStatus!='0'
</select>

<select id="idchecked" parameterType="busker.scan.vo.MemberVO" resultType="busker.scan.vo.MemberVO"> 
	select * from member where memEmail=#{memEmail}
</select>

<insert id="insertMember" parameterType="busker.scan.vo.MemberVO">

<!-- simplejoin -->
	<if test="memTeamName eq null">
		INSERT INTO member(mememail, mempw, memnick, memphone, memstatus, memtype) VALUES(#{memEmail}, #{memPw}, #{memNick}, #{memPhone}, #{memStatus}, #{memType})
	</if>
	<!-- 파일업로드 회원가입 -->
	<if test="memTeamName neq null">
		INSERT INTO member(mememail, mempw, memphone, memteamtype, memteamname, memvideo, memdetail, memstatus, memtype, memteamphoto) 
		VALUES(#{memEmail}, #{memPw}, #{memPhone},'${memTeamType}', #{memTeamName}, #{memVideo}, #{memDetail}, #{memStatus}, #{memType}, #{memTeamPhoto})
	</if>
</insert>

<update id="deleteMember" parameterType="busker.scan.vo.MemberVO">
UPDATE member SET memStatus='0' WHERE memEmail=#{memEmail} AND memPw=#{memPw}
</update>

<select id="simpleIdSearch" parameterType="busker.scan.vo.MemberVO" resultType="busker.scan.vo.MemberVO">
SELECT *FROM member WHERE memPhone=#{memPhone} AND memStatus='1'
</select>

<select id="buskerIdSearch" parameterType="busker.scan.vo.MemberVO" resultType="busker.scan.vo.MemberVO">
SELECT *FROM member WHERE memPhone=#{memPhone} AND memTeamName=#{memTeamName} AND memStatus='2'
</select>

<select id="searchPw" parameterType="busker.scan.vo.MemberVO" resultType="busker.scan.vo.MemberVO">
SELECT *FROM member WHERE memPhone=#{memPhone} AND memEmail=#{memEmail}
</select>

</mapper>
